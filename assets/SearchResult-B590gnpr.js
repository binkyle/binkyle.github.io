import{g as K,u as W,h as X,i as Z,j as ee,t as ae,k as le,l as R,m as b,n as e,p as te,q as se,s as re,R as L,v as oe,x as ie,y as ue,z as ne,A as ce,B as P,C as $,D as ge,E as me,F as ve,G as Ee,L as he,H as de,I as pe,J as Ae,K as I,M as ye,N as f}from"./app-W82CiwHR.js";const Be=["/","/intro.html","/blog/vuePressgit.html","/blog/design%20mode/%E6%B7%B1%E5%85%A5%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F_%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0.html","/blog/Autosar/autosar_can_protocol.html","/blog/Autosar/autosar_solution_summary.html","/blog/algorithm/%E4%B8%80%E4%BA%9B%E7%AE%97%E6%B3%95%E6%9D%82%E8%AE%B0.html","/blog/github/githubNote.html","/blog/investment/%E7%82%92%E8%82%A1%E7%9A%84%E6%99%BA%E6%85%A7.html","/blog/programming%20language/C_Cplusplus/C_C__%E8%AF%AD%E6%B3%95%E6%8A%A5%E9%94%99%E9%9B%86%E5%90%88%E6%B1%87%E6%80%BB.html","/blog/programming%20language/C_Cplusplus/c__%E4%B8%A4%E7%A7%8D%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8B%BC%E6%8E%A5%E5%8C%BA%E5%88%AB.html","/blog/programming%20language/C_Cplusplus/extern_in_c_page1.html","/blog/programming%20language/C_Cplusplus/sizeof_in_c.html","/blog/programming%20language/Python/generate_requirments.html","/blog/programming%20language/Python/python_venv.html","/blog/Autosar/DaVinci%20Configurator%20Classic/Auto-Connect-Port-Prototypes/Auto-Connect_Port_Prototypes.html","/blog/Autosar/DaVinci%20Configurator%20Classic/userManual/userManual.html","/404.html","/blog/","/blog/design%20mode/","/blog/Autosar/","/blog/algorithm/","/blog/github/","/blog/investment/","/blog/programming%20language/C_Cplusplus/","/blog/programming%20language/","/blog/programming%20language/Python/","/blog/Autosar/DaVinci%20Configurator%20Classic/Auto-Connect-Port-Prototypes/","/blog/Autosar/DaVinci%20Configurator%20Classic/","/blog/Autosar/DaVinci%20Configurator%20Classic/userManual/","/category/","/category/%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/","/category/autosar/","/category/%E7%AE%97%E6%B3%95/","/category/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/","/tag/","/tag/vuepress/","/tag/%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/","/tag/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","/tag/c/","/tag/can/","/tag/%E5%8D%8F%E8%AE%AE/","/tag/%E6%A6%82%E8%BF%B0/","/tag/%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/","/tag/%E4%BD%99%E6%95%B0%E8%AE%A1%E7%AE%97/","/tag/github/","/tag/%E7%82%92%E8%82%A1%E7%9A%84%E6%99%BA%E6%85%A7/","/tag/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/","/tag/c__/","/tag/%E6%8A%A5%E9%94%99/","/tag/%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8B%BC%E6%8E%A5/","/tag/c%E8%AF%AD%E8%A8%80/","/tag/extern/","/tag/siezof/","/tag/python/","/tag/pipreqs/","/tag/venv/","/tag/tool/","/tag/developer/","/article/","/star/","/timeline/"],Ce="SLIMSEARCH_QUERY_HISTORY",p=I(Ce,[]),be=()=>{const{queryHistoryCount:s}=f;return{enabled:s>0,queryHistories:p,addQueryHistory:u=>{p.value=Array.from(new Set([u,...p.value.slice(0,s-1)]))},removeQueryHistory:u=>{p.value=[...p.value.slice(0,u),...p.value.slice(u+1)]}}},q=s=>Be[s.id]+("anchor"in s?`#${s.anchor}`:""),fe="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:M}=f,A=I(fe,[]),_e=()=>({enabled:M>0,resultHistories:A,addResultHistory:i=>{{const u={link:q(i),display:i.display};"header"in i&&(u.header=i.header),A.value=[u,...A.value.slice(0,M-1)]}},removeResultHistory:i=>{A.value=[...A.value.slice(0,i),...A.value.slice(i+1)]}}),De=s=>{const{page:i,routeLocale:u}=ge(),_=me(),r=R(0),y=b(()=>r.value>0),g=ve([]);return Ee(()=>{const{search:D,terminate:E}=he(),B=pe(h=>{const{resultsFilter:H=t=>t,querySplitter:d,suggestionsFilter:Q,...o}=_.value;h?(r.value+=1,D(h,u.value,o).then(t=>H(t,h,u.value,i.value)).then(t=>{r.value-=1,g.value=t}).catch(t=>{console.warn(t),r.value-=1,r.value||(g.value=[])})):g.value=[]},f.searchDelay-f.suggestDelay,{maxWait:5e3});de([s,u],([h])=>B(h.join(" "))),Ae(()=>{E()})}),{isSearching:y,results:g}};var xe=K({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(s,{emit:i}){const u=W(),_=X(),r=Z(ee),{addQueryHistory:y,queryHistories:g,removeQueryHistory:D}=be(),{resultHistories:E,addResultHistory:B,removeResultHistory:h}=_e(),H=ae(s,"queries"),{results:d,isSearching:Q}=De(H),o=le({isQuery:!0,index:0}),t=R(0),m=R(0),w=b(()=>g.value.length>0||E.value.length>0),x=b(()=>d.value.length>0),k=b(()=>d.value[t.value]||null),T=()=>{const{isQuery:a,index:l}=o;l===0?(o.isQuery=!a,o.index=a?E.value.length-1:g.value.length-1):o.index=l-1},V=()=>{const{isQuery:a,index:l}=o;l===(a?g.value.length-1:E.value.length-1)?(o.isQuery=!a,o.index=0):o.index=l+1},j=()=>{t.value=t.value>0?t.value-1:d.value.length-1,m.value=k.value.contents.length-1},U=()=>{t.value=t.value<d.value.length-1?t.value+1:0,m.value=0},z=()=>{m.value<k.value.contents.length-1?m.value+=1:U()},O=()=>{m.value>0?m.value-=1:j()},F=a=>a.map(l=>ye(l)?l:e(l[0],l[1])),Y=a=>{if(a.type==="customField"){const l=ne[a.index]||"$content",[v,n=""]=ce(l)?l[_.value].split("$content"):l.split("$content");return a.display.map(c=>e("div",F([v,...c,n])))}return a.display.map(l=>e("div",F(l)))},C=()=>{t.value=0,m.value=0,i("updateQuery",""),i("close")},N=()=>e("div",{class:"slimsearch-records"},e("div",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},r.value.queryHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},g.value.map((a,l)=>{const v=o.isQuery&&o.index===l;return e("li",{class:["slimsearch-record-matches",{active:v}],role:"option","aria-selected":v,onClick:()=>{i("updateQuery",a)}},e("div",[e(P,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},a),e("button",{type:"button",class:"slimsearch-remove-icon",title:r.value.remove,"aria-label":r.value.remove,innerHTML:$,onClick:n=>{n.preventDefault(),n.stopPropagation(),D(l)}})]))}))])),G=()=>e("ul",{class:"slimsearch-records"},e("li",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},r.value.resultHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},E.value.map((a,l)=>{const v=!o.isQuery&&o.index===l;return e("li",{class:["slimsearch-record-matches",{active:v}],role:"option","aria-selected":v},e(L,{to:a.link,onClick:()=>{C()}},()=>[e(P,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[a.header?e("div",{class:"slimsearch-record-content-header"},a.header):null,e("div",a.display.map(n=>F(n)).flat())]),e("button",{type:"button",class:"slimsearch-remove-icon",title:r.value.remove,"aria-label":r.value.remove,innerHTML:$,onClick:n=>{n.preventDefault(),n.stopPropagation(),h(l)}})]))}))]));return te("keydown",a=>{if(s.isFocusing){if(x.value){if(a.key==="ArrowUp")O();else if(a.key==="ArrowDown")z();else if(a.key==="Enter"){const l=k.value.contents[m.value];y(s.queries.join(" ")),B(l),u.push(q(l)),C()}}else if(a.key==="ArrowUp")T();else if(a.key==="ArrowDown")V();else if(a.key==="Enter"){const{index:l}=o;o.isQuery?(a.preventDefault(),i("updateQuery",g.value[l])):(u.push(E.value[l].link),C())}}}),se([t,m],()=>{var a;(a=document.querySelector(".slimsearch-record.active .slimsearch-record-matches.active"))==null||a.scrollIntoView(!1)},{flush:"post"}),()=>e("div",{id:"slimsearch-results",class:["slimsearch-result-wrapper",{empty:s.queries.length?!x.value:!w.value}]},s.queries.length?Q.value?e(re,{hint:r.value.searching}):x.value?e("div",{class:"slimsearch-records",role:"listbox","aria-labeledby":"slimsearch-label"},d.value.map(({title:a,contents:l},v)=>{const n=t.value===v;return e("div",{class:["slimsearch-record",{active:n}],role:"group","aria-selected":n},[e("div",{class:"slimsearch-record-title"},a||r.value.defaultTitle),e("ul",{class:"slimsearch-record-contents"},l.map((c,J)=>{const S=n&&m.value===J;return e("li",{class:["slimsearch-record-matches",{active:S}],role:"option","aria-selected":S},e(L,{to:q(c),onClick:()=>{y(s.queries.join(" ")),B(c),C()}},()=>[c.type==="text"?null:e(c.type==="title"?oe:c.type==="heading"?ie:ue,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[c.type==="text"&&c.header?e("div",{class:"slimsearch-record-content-header"},c.header):null,e("div",Y(c))])]))}))])})):r.value.emptyResult:w.value?[N(),G()]:r.value.emptyHistory)}});export{xe as default};
